API
=
Для повышения качества кода предлагается разделить основную логику кода и взаимодействия с сайтами. На данный момент требуется написать API домклика и циана. 

API циана на начальной стадии придется писать через обычные юзерские запросы к сайту в связи со строгой политикой использования.

API домклика также придется переписывать через обычные запросы в связи со сменой принципа работы сайта и отключением старого api. 

Использование API
=

Домклик
-

Циан
-

Внутреннее API домклика:
=
Есть несколько проблем:
1) в любой момент могут добавить потребность подписывать api
2) отсутствие полного списка методов
По крайней мере на данный момент можно получить информацию про карточку через запрос:

Запросы которые сейчас существуют:
-
Получение списка объектов:
https://offers-service.domclick.ru/research/v3/offers - однако этим способом непонятно как достать список новостроек, offer_type=layout не работает. Но в целом запрос сойдет для получения остальных оферов.  
UPD: теперь такой доступ запретили

Получение информации про объекты
для новостроек: https://offer-card.domclick.ru/api/v3/offers/sale/new_flats/CARD_ID 
для обычных оферов: https://offer-card.domclick.ru/api/v3/offers/sale/flats/CARD_ID 